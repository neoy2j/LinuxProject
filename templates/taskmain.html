<!--íˆ¬ë‘ë¦¬ìŠ¤íŠ¸ ë³¸ í˜ì´ì§€: ë‹¬ë ¥ ìˆê³ , í•  ì¼ ëœ¨ëŠ” í˜ì´ì§€-->
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script>tailwind.config = { theme: { extend: { colors: { primary: '#4ade80', secondary: '#a3e635' }, borderRadius: { 'none': '0px', 'sm': '4px', DEFAULT: '8px', 'md': '12px', 'lg': '16px', 'xl': '20px', '2xl': '24px', '3xl': '32px', 'full': '9999px', 'button': '8px' } } } }</script>
  <!--ë””ìì¸ì„ ìœ„í•œ ì½”ë“œ: ì‚­ì œí•˜ë©´ ì•ˆë¨-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!--âœ…ì•„ì´ì½˜-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
</head>

<body class="h-full w-full min-h-screen min-w-full">
  <div class="flex min-h-screen h-full w-full">
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="w-64 border-r border-gray-200 bg-white">
      <div class="p-4 border-b border-gray-200 flex items-center">
        <div class="font-['Pacifico'] text-primary text-xl">logo</div>
        <div class="w-8 h-8 flex items-center justify-center ml-auto">
          <i class="ri-menu-line text-gray-500"></i>
        </div>
      </div>
      <div class="p-4">
        <h2 class="text-sm font-medium text-gray-500 mb-2">ì¹´í…Œê³ ë¦¬</h2>
        <div class="space-y-1">
          <!-- ë§ˆìŒ ì¹´í…Œê³ ë¦¬ -->
          <div class="category-item flex items-center px-3 py-2 rounded bg-green-50">
            <div class="w-6 h-6 flex items-center justify-center mr-2 text-green-500">
              <i class="ri-heart-line"></i>
            </div>
            <span class="text-green-600 font-medium">ë§ˆìŒ</span>
            <div class="category-actions opacity-0 flex ml-auto">
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="ri-edit-line"></i>
              </button>
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500">
                <i class="ri-delete-bin-line"></i>
              </button>
            </div>
          </div>
          <!-- ê³µë¶€ ì¹´í…Œê³ ë¦¬ -->
          <div class="category-item flex items-center px-3 py-2 rounded hover:bg-gray-50">
            <div class="w-6 h-6 flex items-center justify-center mr-2 text-blue-500">
              <i class="ri-book-open-line"></i>
            </div>
            <span>ê³µë¶€</span>
            <div class="category-actions opacity-0 flex ml-auto">
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="ri-edit-line"></i>
              </button>
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500">
                <i class="ri-delete-bin-line"></i>
              </button>
            </div>
          </div>

          <!-- íŒ€í”Œ ì¹´í…Œê³ ë¦¬ -->
          <div class="category-item flex items-center px-3 py-2 rounded hover:bg-gray-50">
            <div class="w-6 h-6 flex items-center justify-center mr-2 text-indigo-500">
              <i class="ri-team-line"></i>
            </div>
            <span>íŒ€í”Œ</span>
            <div class="category-actions opacity-0 flex ml-auto">
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="ri-edit-line"></i>
              </button>
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500">
                <i class="ri-delete-bin-line"></i>
              </button>
            </div>
          </div>
          <!-- ìš´ë™ ì¹´í…Œê³ ë¦¬ -->
          <div class="category-item flex items-center px-3 py-2 rounded hover:bg-gray-50">
            <div class="w-6 h-6 flex items-center justify-center mr-2 text-orange-500">
              <i class="ri-run-line"></i>
            </div>
            <span>ìš´ë™</span>
            <div class="category-actions opacity-0 flex ml-auto">
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="ri-edit-line"></i>
              </button>
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500">
                <i class="ri-delete-bin-line"></i>
              </button>
            </div>
          </div>
          <!-- ë…ì„œ ì¹´í…Œê³ ë¦¬ -->
          <div class="category-item flex items-center px-3 py-2 rounded hover:bg-gray-50">
            <div class="w-6 h-6 flex items-center justify-center mr-2 text-purple-500">
              <i class="ri-book-read-line"></i>
            </div>
            <span>ë…ì„œ</span>
            <div class="category-actions opacity-0 flex ml-auto">
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="ri-edit-line"></i>
              </button>
              <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500">
                <i class="ri-delete-bin-line"></i>
              </button>
            </div>
          </div>
        </div>
        <button class="mt-4 flex items-center text-sm text-gray-600 hover:text-gray-900">
          <div class="w-5 h-5 flex items-center justify-center mr-1">
            <i class="ri-add-line"></i>
          </div>
          <span>ì¹´í…Œê³ ë¦¬ ì¶”ê°€</span>
        </button>
      </div>
    </div>

    <!--ë©”ì¸ì½˜í…ì¸ -->
    <div class="flex-1 flex flex-col min-h-0 h-full p-6">
      <div class="border-b border-gray-200 pb-4 mb-6">
        <h1 class="text-xl font-semibold">íˆ¬ë‘ë¦¬ìŠ¤íŠ¸</h1>
      </div>
      <div class="flex items-center mb-6">
        <!--**ì˜¤ëŠ˜ì˜ ë‚ ì§œ + ë‚¨ì€ í•  ì¼ ëª©ë¡**-->
        <h2 class="text-lg font-medium text-gray-900" id="top-today-todo-date">5/21 ì˜¤ëŠ˜ì˜ todo</h2>
        <span class="ml-2 text-sm text-gray-500" id="today-listnum">13ê°œì˜ í•­ëª©</span>
      </div>

      <!--ì´ ì½”ë“œê°€ ìº˜ë¦°ë”ë‘ ì¼ì¼ íˆ¬ë‘ ë‚˜ë€íˆ ë„ì›Œì£¼ê³  ìˆìœ¼ë‹ˆ ì‚­ì œí•˜ë©´ ì•ˆë¼ìš”!-->
      <div class="flex-1 min-h-0 flex flex-col">
        <div class="grid grid-cols-2 gap-6 h-full min-h-0 flex-1">
          <!-- ìº˜ë¦°ë” -->
          <div class="h-full flex flex-col min-h-0">
            <div class="bg-white border border-gray-200 rounded-lg p-5 shadow-sm flex-1 flex flex-col min-h-0">
              <!--ìº˜ë¦°ë” ìƒë‹¨ë¶€ë¶„-->
              <div class="flex justify-between items-center mb-4">
                <h3 class="font-medium" id="calendertop-date">5ì›” 2025</h3>
                <div class="flex">
                  <button
                    class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-900 !rounded-button"
                    id="lastmonth-button">
                    <i class="ri-arrow-left-s-line"></i>
                  </button>
                  <button
                    class="w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-900 !rounded-button"
                    id="nextmonth-button">
                    <i class="ri-arrow-right-s-line"></i>
                  </button>
                </div>
              </div>

              <div class="grid grid-cols-7 gap-1 mb-2">
                <div class="text-center text-sm font-medium text-gray-600">SUN</div>
                <div class="text-center text-sm font-medium text-gray-600">MON</div>
                <div class="text-center text-sm font-medium text-gray-600">TUE</div>
                <div class="text-center text-sm font-medium text-gray-600">WED</div>
                <div class="text-center text-sm font-medium text-gray-600">THU</div>
                <div class="text-center text-sm font-medium text-gray-600">FRI</div>
                <div class="text-center text-sm font-medium text-gray-600">SAT</div>
              </div>

              <!--ìº˜ë¦°ë”: ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆë¡œ ì—´7ê°œ, gapì€1ì”© ì£¼ê²Œë˜ì–´ìˆëŠ” ë””ìì¸ì…ë‹ˆë‹¤. 7ì€ ê±´ë“¤ì§€ ë§ê³ , ê°„ê²© ë„ìš°ê³  ì‹¶ìœ¼ë©´ 1ë§Œ ì›€ì§ì´ì„¸ìš”-->
              <div class="grid grid-cols-7 gap-1 flex-1 min-h-0" id="ë‹¬ë ¥"></div>
            </div>
          </div>

          <div class="h-full flex flex-col min-h-0">
            <!-- ì¼ì¼ íˆ¬ë‘ -->
            <div class="bg-white border border-gray-200 rounded-lg p-5 shadow-sm flex-1 flex flex-col min-h-0">

              <div class="flex justify-between items-center mb-4">
                <h3 class="font-medium" id="today-todo-date">5/20</h3>
                <!--ğŸ”´ íˆ¬ë°ì´ í•  ì¼ í•­ëª© ê°œìˆ˜: ì´ê±° ì•„ë§ˆ ë™ì ìœ¼ë¡œ ë°”ê¿”ì•¼í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë¬´ë¦¬ë©´ ê·¸ëƒ¥ ë¹¼ê³ ìš”-->
                <span class="text-xs text-gray-500">10ê°œì˜ í•­ëª©</span>
              </div>

              <!--íˆ¬ë‘ë¦¬ìŠ¤íŠ¸ ë™ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒ í•„ìš” + DB/íŒŒì¼ ë“±ë“±..ì¨‹ë“  ì •ë³´ ì €ì¥í•˜ëŠ” ë°©ë²• êµ¬í˜„ í•„ìš”-->
              <!-- ë§ˆìŒ ì¹´í…Œê³ ë¦¬ -->
              <div class="mb-5" id="todoarea">
                <div class="todolist-card" id="todo-card"></div>
              </div>
              <button class="text-sm text-gray-500 hover:text-primary flex items-center" id="addtodo">
                <div class="w-4 h-4 flex items-center justify-center mr-1">
                  <i class="ri-add-line"></i>
                </div>
                ì¶”ê°€í•˜ê¸°
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>

    document.getElementById('addtodo').addEventListener('click', addtodolist);

    function loadtodolist(month, day) {
      console.log(month, day);

      const todos = ["ì›ƒê¸°", "ë†€ê¸°", "ë¨¹ê¸°", "ìê¸°", "ìê¸°", "ìí”„ì‹¤ê³¼ì œí•˜ê¸°"];

      // ê¸°ì¡´ ë‚´ìš© ì§€ìš°ê¸°
      const todoArea = document.getElementById("todoarea");
      todoArea.innerHTML = ''; // ê¸°ì¡´ todoë“¤ ì œê±°

      const Area = document.createElement('div');
      Area.className = "mb-2";

      const ul = document.createElement('ul');
      ul.className = "space-y-2";

      for (let todo of todos) {
        const li = document.createElement('li');
        li.className = "task-item flex items-center justify-between";
        li.innerHTML = `
            <div class="flex items-center">
                <input type="checkbox" class="custom-checkbox">
                <span class="ml-2 text-base" id="todolist-context">${todo}</span>
            </div>
            <div class="task-actions flex">
                <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 edit-btn">
                    <i class="ri-edit-line"></i>
                </button>
                <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500 delete-btn">
                    <i class="ri-delete-bin-line"></i>
                </button>
            </div>
        `;

        const taskText = li.querySelector('#todolist-context');

        // ì²´í¬ë°•ìŠ¤ ì´ë²¤íŠ¸ ì—°ê²°
        const checkbox = li.querySelector('.custom-checkbox');
        const span = li.querySelector('span');
        checkbox.addEventListener('change', function () {
          span.classList.toggle('line-through', this.checked);
          span.classList.toggle('text-gray-500', this.checked);
        });

        // ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²°
        li.querySelector('.delete-btn').addEventListener('click', () => {
          li.remove();
        });

        li.querySelector('.edit-btn').addEventListener('click', () => {
          taskText.setAttribute('contenteditable', 'true');
          taskText.focus();

          taskText.addEventListener('keydown', (e) => {
            if (e.key == 'Enter') {
              e.preventDefault();
              taskText.blur();
            }
          })
          taskText.addEventListener('blur', () => {
            taskText.setAttribute('contenteditable', 'false');
          }, { once: true })
        });

        ul.appendChild(li);
      }

      Area.appendChild(ul);
      todoArea.appendChild(Area);
    }

    function addtodolist() {
      const Area = document.createElement('div');
      todo = "ìƒˆë¡œìš´ í•  ì¼";

      Area.innerHTML = ` <div class="mb-2">
                               
                                <ul class="space-y-2">
                                    <li class="task-item flex items-center justify-between" id="todolist-box">
                                        <div class="flex items-center">
                                            <input type="checkbox" class="custom-checkbox">
                                            <span class="ml-2 text-base" id="todolist-context">${todo}</span>
                                        </div>
                                        <div class="task-actions flex">
                                            <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600">
                                                <i class="ri-edit-line"></i>
                                            </button>
                                            <button class="w-6 h-6 flex items-center justify-center text-gray-400 hover:text-red-500">
                                                <i class="ri-delete-bin-line"></i>
                                            </button>
                                        </div>
                                    </li>
                                </ul>
                                </div>`;
      const todoArea = document.getElementById("todoarea");
      todoArea.appendChild(Area);

      const checkbox = Area.querySelector('.custom-checkbox');
      const taskText = Area.querySelector('#todolist-context');

      Area.querySelector('.ri-delete-bin-line').addEventListener('click', function () {
        Area.remove();
        li.querySelector('.')
      })

      Area.querySelector('.ri-edit-line').addEventListener('click', () => {
        taskText.setAttribute('contenteditable', 'true');
        taskText.focus();

        taskText.addEventListener('keydown', (e) => {
          if (e.key == 'Enter') {
            e.preventDefault();
            taskText.blur();
          }
        })
        taskText.addEventListener('blur', () => {
          taskText.setAttribute('contenteditable', 'false');
        }, { once: true })
      }
      );


      checkbox.addEventListener('change', function () {
        if (this.checked) {
          taskText.classList.add('line-through', 'text-gray-500');
        }
        else {
          taskText.classList.remove('line-through', 'text-gray-500');
        }
      });

    }

    //í•  ì¼ í¸ì§‘í•˜ëŠ” ê¸°ëŠ¥
    function edittodolist() {
      const editArea = document.getElementById()
    }

    //ì´ì „/ì´í›„ > ë˜ëŠ” < ëˆ„ë¥´ë©´ ë‹¬ë ¥ ë°”ë€Œê²Œí•˜ëŠ” ê¸°ëŠ¥
    const today = new Date();
    let defaultmonth = today.getMonth() + 1;
    let defaultyear = 2025;
    renderCalender(defaultyear, defaultmonth);

    document.getElementById('lastmonth-button').addEventListener('click', function () {
      defaultmonth--;
      if (defaultmonth < 1) {
        defaultmonth = 12;
        defaultyear--;
      }
      renderCalender(defaultyear, defaultmonth);
    });

    document.getElementById('nextmonth-button').addEventListener('click', function () {
      defaultmonth++;
      if (defaultmonth > 12) {
        defaultmonth = 1;
        defaultyear++;
      }
      renderCalender(defaultyear, defaultmonth);
    });

    //ì´ì „/ì´í›„ ë²„íŠ¼ ëˆ„ë¥´ë©´ ë‹¬ë ¥ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ê²Œ í•˜ëŠ” í•¨ìˆ˜
    function renderCalender(year, month) {
      //ë‹¬ë ¥ ê°€ì§€ê³  ë­ í• ê±°ë©´, ë³€ìˆ˜ëŠ” caldendersectionì…ë‹ˆë‹¤
      const calendersection = document.getElementById('ë‹¬ë ¥');
      calendersection.innerHTML = '';

      //
      const editCalenderTop = document.getElementById('calendertop-date');
      editCalenderTop.innerHTML = '';
      editCalenderTop.innerHTML = `<h3 class="font-medium" id="calendertop-date">${month}ì›” ${year}</h3>`

      const firstDay = new Date(year, month - 1, 1)
      const lastDay = new Date(year, month, 0)

      const firstWeekDay = firstDay.getDay();
      const lastMonthLastDay = new Date(year, month - 1, 0).getDate();

      for (let i = firstWeekDay - 1; i >= 0; i--) {
        const dayDiv = document.createElement('div');
        dayDiv.className = "flex justify-center";
        dayDiv.innerHTML = `<div class= "day text-gray-400">${lastMonthLastDay - i}</div>`;
        calendersection.appendChild(dayDiv);
      }

      for (let d = 1; d <= lastDay.getDate(); d++) {
        const dayDiv = document.createElement('div');
        dayDiv.className = "flex justify-center";
        dayDiv.innerHTML = `<div class="day bg-white">${d}</div>`;
        calendersection.appendChild(dayDiv)
      }
    }
    document.addEventListener('DOMContentLoaded', function () {

      // ì²´í¬ë°•ìŠ¤ ëˆ„ë¥´ë©´ íšŒìƒ‰ì¤„ê°€ê²Œí•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤ (ë””ìì¸ì  ìš”ì†Œë§Œ ìˆì–´ìš”)
      const checkboxes = document.querySelectorAll('.custom-checkbox');
      checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function () {
          const taskText = this.nextElementSibling;
          if (this.checked) {
            taskText.classList.add('line-through', 'text-gray-500');
          }
          else {
            taskText.classList.remove('line-through', 'text-gray-500');
          }
        });
      });

      // ìº˜ë¦°ë” ë‚ ì§œ ì„ íƒ ê¸°ëŠ¥
      document.getElementById('ë‹¬ë ¥').addEventListener('click', function (e) {
        if (e.target.className == "day text-gray-400") {
          document.querySelector('.day.active')?.classList.remove('active', 'bg-primary', 'text-white');
          e.target.classList.add('active', 'bg-primary', 'text-white');

          tmp = defaultmonth - 1;
          console.log(tmp);

          document.getElementById('today-todo-date').innerHTML = `<h3 class="font-medium" id="today-todo-date">${tmp}/${e.target.textContent}`
          document.getElementById('top-today-todo-date').textContent = `${tmp}/${e.target.textContent} ì˜¤ëŠ˜ì˜ todo`;
          document.getElementById('today-todo-date').textContent = `${tmp}/${e.target.textContent}`;
          loadtodolist(tmp, e.target.textContent);
        }
        else if (e.target.classList.contains('day')) {
          document.querySelector('.day.active')?.classList.remove('active', 'bg-primary', 'text-white');
          e.target.classList.add('active', 'bg-primary', 'text-white');

          document.getElementById('today-todo-date').innerHTML = `<h3 class="font-medium" id="today-todo-date">${defaultmonth}/${e.target.textContent}`
          document.getElementById('top-today-todo-date').textContent = `${defaultmonth}/${e.target.textContent} ì˜¤ëŠ˜ì˜ todo`;
          document.getElementById('today-todo-date').textContent = `${defaultmonth}/${e.target.textContent}`;
          loadtodolist(defaultmonth, e.target.textContent);
        }
      });
    });
  </script>
</body>

</html>